<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Git on Lufei's blog</title><link>https://blog.99bilibili.eu.org/categories/git/</link><description>Recent content in Git on Lufei's blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 24 Mar 2024 21:39:47 +0000</lastBuildDate><atom:link href="https://blog.99bilibili.eu.org/categories/git/index.xml" rel="self" type="application/rss+xml"/><item><title>Git版本控制命令</title><link>https://blog.99bilibili.eu.org/p/210/</link><pubDate>Sun, 24 Mar 2024 21:39:47 +0000</pubDate><guid>https://blog.99bilibili.eu.org/p/210/</guid><description>撤销工作区修改 使用场景：已有修改加入暂存区，后续出现 bug, 恢复到上一次暂存状态。
git add . # 加入暂存区 git checkout -- . # 撤销工作区修改，恢复到上一次暂存时的状态 恢复到上一次提交 commit git restore --staged . # 恢复到未暂存状态 git checkout -- . # 恢复上一次提交</description></item><item><title>Git回退到指定版本</title><link>https://blog.99bilibili.eu.org/p/207/</link><pubDate>Fri, 22 Mar 2024 14:29:10 +0000</pubDate><guid>https://blog.99bilibili.eu.org/p/207/</guid><description>git回退到上个版本 git reset --hard HEAD^ 回退到前3次提交之前，以此类推，回退到n次提交之前
git reset --hard HEAD~3 回退到指定版本 查看 commit 哈希值
git reflog 红色框框的就是哈希值
例如我要回退到commit信息为: 版本005 的时候,对应哈希值: adacc9e
git reset --hard adacc9e 更多版本 要回退到更久之前的版本,使用脚本:
按 q 退出 再按序号选择版本
#!/bin/bash # 显示git的reflog git reflog # 提取reflog输出的序号和对应的提交哈希值，并将其存储在数组中 mapfile -t commit_array &amp;lt; &amp;lt;(git reflog | grep -E &amp;#39;^[a-f0-9]+&amp;#39; | cat -n) # 显示序号和对应的提交哈希值供用户选择 for ((i=0; i&amp;lt;${#commit_array[@]}; i++)); do echo &amp;#34;${commit_array[i]}&amp;#34; done # 提示用户输入要恢复的版本号前面对应的数字 read -p &amp;#34;请输入要恢复的版本号前面对应的数字: &amp;#34; version_number # 提取用户选择的提交哈希值 selected_commit_hash=$(echo &amp;#34;${commit_array[version_number-1]}&amp;#34; | awk &amp;#39;{print $2}&amp;#39;) # 使用git reset --hard命令将本地代码回退到指定版本 git reset --hard &amp;#34;$selected_commit_hash&amp;#34;</description></item></channel></rss>